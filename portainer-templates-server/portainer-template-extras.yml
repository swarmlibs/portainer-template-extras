# yaml-language-server: $schema=https://raw.githubusercontent.com/swarmlibs/dockerstack-schema/main/schema/dockerstack-spec.json

services:
  template-server:
    image: swarmlibs/portainer-template-server
    command: --repos-url=${REPOS_URL:-https://raw.githubusercontent.com/swarmlibs/portainer-template-extras/refs/heads/main/repos.json}
    hostname: portainer-template-extras.internal
    networks:
      portainer_agent_network:
    deploy:
      replicas: 1
      placement:
        constraints:
          - node.role == manager
      restart_policy:
        condition: any

networks:
  portainer_agent_network:
    name: ${PORTAINER_AGENT_NETWORK:-portainer_agent_network}
    external: true
